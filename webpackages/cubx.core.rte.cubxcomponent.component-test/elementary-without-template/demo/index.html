<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>&lt;elementary-without-template&gt; demo</title>
    <script src="../../../cubx.core.rte@3.0.0/webcomponents/custom-elements-es5-adapter.js"></script>
    <script src="../../../cubx.core.rte@3.0.0/webcomponents/webcomponents-lite.js"></script>

    <!--
        Refer to the crc-loader artifact from a Cubbles-Base.
        Take care: All other dependencies are expected to be available within the same Base!

        Want to add a 'main' -script to be executed after the dependencies have been loaded?
        If yes, add the following attribute: data-crc-main="js/my-script.js"
    -->
    <script src="../../../cubx.core.rte@3.0.0/crc-loader/js/main.js" data-crcinit-loadcif="true"></script>

</head>
<body>
<!--  Place cubbles components there. -->
<elementary-without-template cubx-webpackage-id="this"></elementary-without-template>

<input id="number-input-output" type="number"><button id="set-number-input-output" onclick="setNumberInputOutput()" disabled>Set</button><br>
<input id="string-input" type="text"><button id="set-string-input" onclick="setStringInput()" disabled>Set</button><br>
<textarea id="object-input-output">{ "foo": "bar"}</textarea><button id="set-object-input-output" onclick="setObjectInputOutput()" disabled>Set</button>
<br>
<br>
<h3>Messages</h3>
<div id="messages"></div>

<script>
  var elem = document.querySelector('elementary-without-template');
  var messages = document.querySelector('#messages');
  var buttonNumberInput = document.querySelector('#set-number-input-output');
  var buttonStringInput = document.querySelector('#set-string-input');
  var buttonObjectInputOutput = document.querySelector('#set-object-input-output');
  document.addEventListener('cifReady', function(){
    buttonNumberInput.disabled = false;
    buttonStringInput.disabled = false;
    buttonObjectInputOutput.disabled = false;
  });

  elem.addEventListener('cifModelChange', function(evt) {
    if (evt.detail.slot === 'message') {
      var div = document.createElement('div');
      messages.insertAdjacentHTML('beforeend', evt.detail.payload);
    }
  });
  function setNumberInputOutput () {
    elem.setNumberInputOutput(Number(document.querySelector('#number-input-output').value));
  }
  function setStringInput () {

    elem.setStringInput(document.querySelector('#string-input').value);
  }
  function setObjectInputOutput() {
    elem.setObjectInputOutput(document.querySelector('#object-input-output').value);
  }
</script>
</body>
</html>
